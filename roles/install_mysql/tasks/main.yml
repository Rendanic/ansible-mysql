---

- name: enable Repos
  shell: yum-config-manager --enable {{ item }}
  with_items:
     - ol7_MySQL57
     - ol7_addons
     - ol7_optional_latest

- name: Install MySQL + Tools
  yum: name={{ item }} state=present
  with_items: "{{ mysql_rpm }}"

- name: add sudoers for systemctl start/stop mysqld and mylvmbackup
  template: src=sudoers_mysql dest=/etc/sudoers.d/mysql group=root owner=root mode=0644
  tags: sudo

- name: create home for mysql
  file: 
     path:  /home/mysql 
     owner: mysql
     group: mysql
     mode:  0750
     state: directory
  tags: osuser
  
- name: new home for mysql user
  user: 
     name:  mysql
     shell: /bin/bash 
     home:  /home/mysql
     state: present
     generate_ssh_key: True
  tags: osuser

- name: copy mybinlogcopy.sh
  copy: src=mybinlogcopy.sh dest=/usr/local/bin mode=755 owner=root group=root backup=no
  tags: mybinlogcopy
